# PRD: Rock Community Platform

## 1. 프로젝트 개요

### 1.1 프로젝트 정보
- **프로젝트 명**: Rock Community - The Ultimate Rock Music Hub
- **도메인**: metaldragon.co.kr (구매 완료)
- **타입**: 글로벌 Rock 음악 커뮤니티 플랫폼
- **인프라**: 자체 서버 + Cloudflare CDN

### 1.2 비전
전 세계 Rock 음악 팬들을 위한 통합 커뮤니티 플랫폼. 밴드 정보, 앨범 리뷰, 공연 일정, 팬 커뮤니티를 하나의 플랫폼에서 제공하며, AI 기술을 활용한 자동화된 Rock 뉴스 수집과 Rock 테마 AI 아트를 통해 Rock 문화의 허브 역할을 수행한다.

### 1.3 핵심 가치
- **Community First**: Rock 팬들의 열정과 토론을 최우선으로
- **Comprehensive**: 밴드 정보부터 공연 일정까지 모든 Rock 정보 통합
- **Modern Tech**: 최신 웹 기술로 빠르고 아름다운 UX 제공
- **AI-Powered**: 자동 뉴스 수집, Rock 아트 생성으로 풍부한 컨텐츠

---

## 2. 목표 및 성공 지표

### 2.1 비즈니스 목표
1. 글로벌 Rock 커뮤니티 구축 (전 세계 Rock 팬 유입)
2. 밴드/아티스트/앨범 데이터베이스 구축
3. 공연 정보 허브 역할 (국내외 Rock 공연 일정 집약)
4. Rock 문화 아카이빙 (사진, 영상, AI 아트)

### 2.2 성공 지표 (KPI)
- **트래픽**: 월 방문자 5,000명 이상 (6개월 내)
- **커뮤니티 활성화**: 월 게시물 100개 이상, 댓글 500개 이상
- **밴드 DB**: 500개 이상의 밴드 정보 등록
- **공연 정보**: 월 평균 50개 이상의 공연 정보 업데이트
- **사용자 경험**: 페이지 로딩 속도 3초 이내, 모바일 반응형 100%
- **시스템 안정성**: 월 업타임 99.5% 이상

### 2.3 기술 목표
- Supabase 전체 스택 활용 (Auth, DB, Storage, Realtime, Edge Functions)
- 서버 컴포넌트(RSC) 적극 활용으로 성능 최적화
- Edge Functions로 Rock 뉴스 크롤링 자동화
- RLS(Row Level Security)를 통한 보안 강화

---

## 3. 사용자 페르소나

### 3.1 주 사용자 (Rock 팬)
- **이름**: Rock 음악 애호가
- **역할**: 커뮤니티 참여자, 리뷰 작성자
- **니즈**:
  - 최신 Rock 뉴스와 앨범 정보
  - 공연 일정 확인 및 리뷰 공유
  - 같은 취향의 팬들과 소통
  - 밴드/아티스트 정보 탐색
  - Rock 테마 미디어 감상

### 3.2 부 사용자 (밴드/아티스트)
- **유형**: 인디 밴드, 프로 아티스트
- **니즈**:
  - 밴드 프로필 등록 및 홍보
  - 공연 일정 공지
  - 팬과의 소통

### 3.3 관리자
- **역할**: 커뮤니티 운영, 컨텐츠 관리
- **니즈**:
  - 밴드/앨범 정보 관리
  - 사용자 관리 및 스팸 차단
  - 통계 대시보드

---

## 4. 기능 요구사항

### 4.1 필수 기능 (P0) - Phase 1

#### 4.1.1 인증 시스템
- **사용자 회원가입/로그인**
  - 이메일/비밀번호 인증
  - 소셜 로그인 (Google, GitHub)
  - 이메일 인증
  - 비밀번호 찾기
- **사용자 프로필**
  - 프로필 이미지, 자기소개
  - 좋아하는 장르 태그
  - 활동 내역 (작성 글, 댓글)
- **관리자 권한 관리**
  - 관리자/일반 사용자 역할 구분
  - 관리자 페이지 접근 제어

#### 4.1.2 밴드 데이터베이스
- **밴드 정보**
  - 밴드명, 장르, 국가, 결성연도
  - 밴드 사진/로고
  - 멤버 정보 (이름, 포지션)
  - 공식 SNS 링크
  - 바이오그래피
- **앨범 정보**
  - 앨범명, 발매연도, 앨범 커버
  - 트랙리스트
  - 장르, 레이블
- **아티스트 정보**
  - 아티스트명, 포지션, 출생년도
  - 소속 밴드 히스토리
  - 프로필 사진

#### 4.1.3 커뮤니티 게시판
- **공통 기능**
  - 게시글 작성/수정/삭제 (CRUD)
  - 마크다운 에디터
  - 파일 첨부 (이미지, 문서)
  - 댓글 시스템
  - 좋아요/조회수
  - 검색 및 필터링
  - 페이지네이션
- **게시판 종류**
  - 🎸 **General Discussion** - 자유 토론
  - 💿 **Album Reviews** - 앨범 리뷰
  - 🎤 **Concert Reviews** - 공연 후기
  - 🔥 **Hot Topics** - 인기 토픽
  - 🎨 **Rock Art Showcase** - 팬 아트 공유
- **권한 관리**
  - 읽기: 모든 방문자
  - 쓰기: 로그인 사용자
  - 수정/삭제: 작성자 또는 관리자

### 4.2 중요 기능 (P1) - Phase 2

#### 4.2.1 공연 일정 관리 시스템
- **캘린더 뷰**
  - 월간/주간/일간 뷰
  - 공연 정보 (밴드, 장소, 시간)
  - 티켓 링크
  - 장르별 색상 구분
- **공연 필터링**
  - 장르별, 지역별, 날짜별
  - 밴드별 검색
- **알림 기능**
  - 관심 밴드 공연 알림
  - 이메일 알림 (Supabase Edge Functions)

#### 4.2.2 Rock 뉴스 자동 업데이트
- **뉴스 크롤링 (Edge Functions)**
  - Rock 전문 뉴스
    - 출처: Rolling Stone, NME, Metal Hammer, Loudwire
  - 일 1회 자동 실행 (Supabase Edge Functions + Cron)
- **뉴스 카드 UI**
  - 썸네일 이미지
  - 제목, 요약, 출처, 게시 시간
  - 원문 링크
  - 카테고리 필터 (Classic Rock, Metal, Punk, Alternative 등)
- **RSS 피드 지원**
  - 뉴스 피드 구독 기능

#### 4.2.3 포토 갤러리
- **공연 사진**
  - 팬들이 업로드한 공연 사진
  - 밴드별, 공연별 분류
- **밴드 사진**
  - 공식 밴드 사진
  - 프로모션 사진
- **갤러리 뷰**
  - Masonry 레이아웃
  - 라이트박스 뷰어
  - 좋아요/댓글

#### 4.2.4 AI Rock Art 게시판
- **AI 생성 Rock 아트**
  - Rock 테마 AI 이미지 (DALL-E, Midjourney, Stable Diffusion)
  - 밴드 로고 디자인
  - 앨범 커버 아트
- **작품 메타데이터**
  - 사용 모델, 프롬프트, 생성 날짜
  - 태그, 카테고리
- **갤러리 뷰**
  - 그리드 레이아웃
  - 라이트박스 뷰어
  - 좋아요/댓글

### 4.3 추가 기능 (P2) - Phase 3

#### 4.3.1 YouTube Rock 영상 관리
- **크롤링 시스템**
  - YouTube Data API v3 연동
  - Rock 커버, 라이브 공연 영상
  - 특정 채널/플레이리스트 구독
- **링크 카드 UI**
  - 썸네일, 제목, 설명
  - YouTube 임베드 플레이어
  - 재생목록 생성
- **검색 및 필터**
  - 밴드별, 장르별 필터
  - 키워드 검색

#### 4.3.2 문의 기능
- **문의 폼**
  - 이름, 이메일, 제목, 내용
  - reCAPTCHA v3 (스팸 방지)
- **이메일 전송**
  - Supabase Edge Functions + Resend/SendGrid
  - 관리자 이메일로 전송
  - 자동 회신 이메일 (접수 확인)

#### 4.3.3 관리자 대시보드
- **통계**
  - 일일/주간/월간 방문자 수
  - 인기 게시물 TOP 10
  - 게시판별 활동 통계
  - 밴드/앨범 등록 현황
  - 공연 정보 통계
- **콘텐츠 관리**
  - 모든 게시판 통합 관리
  - 일괄 삭제, 카테고리 이동
  - 밴드/앨범 정보 수정
  - 사용자 관리 (권한 변경, 차단)
- **시스템 관리**
  - 크롤링 작업 로그
  - Edge Functions 실행 로그
  - 에러 모니터링 (Loki + Grafana)

---

## 5. 비기능 요구사항

### 5.1 성능
- **페이지 로딩**
  - 초기 로딩: 3초 이내
  - FCP (First Contentful Paint): 1.5초 이내
  - LCP (Largest Contentful Paint): 2.5초 이내
- **이미지 최적화**
  - Next.js Image 컴포넌트 사용
  - WebP/AVIF 포맷 변환
  - Lazy Loading
- **코드 스플리팅**
  - 라우트별 자동 코드 분할
  - 동적 임포트 활용

### 5.2 보안
- **인증/인가**
  - Supabase Auth (JWT)
  - RLS (Row Level Security) 적용
  - HTTPS 강제 (Cloudflare)
- **데이터 보호**
  - 환경변수로 API 키 관리
  - SQL Injection 방지 (Drizzle ORM)
  - XSS 방지 (React 자동 이스케이핑)
- **Rate Limiting**
  - API 엔드포인트별 요청 제한
  - Upstash Redis로 구현

### 5.3 접근성 (Accessibility)
- **WCAG 2.1 AA 준수**
  - 시맨틱 HTML
  - ARIA 속성
  - 키보드 네비게이션
  - 색상 대비 4.5:1 이상
- **반응형 디자인**
  - Mobile First 접근
  - 브레이크포인트: 320px, 768px, 1024px, 1440px
  - 터치 친화적 UI (버튼 크기 44x44px 이상)

### 5.4 SEO
- **메타 태그**
  - Open Graph, Twitter Card
  - 각 페이지별 동적 메타데이터
- **사이트맵**
  - XML 사이트맵 자동 생성
  - robots.txt 설정
- **구조화된 데이터**
  - JSON-LD (Schema.org)
  - MusicGroup, MusicAlbum, Event

### 5.5 모니터링
- **로그 시스템**
  - Loki + Grafana + Promtail
  - 에러 로그, 접근 로그, 크롤링 로그
- **성능 모니터링**
  - Web Vitals 수집
  - Supabase Realtime으로 실시간 알림
- **알림**
  - 시스템 장애 시 이메일/Slack 알림

---

## 6. 제약사항

### 6.1 기술 제약
- **No 가짜 데이터**: 모든 데이터는 실제 API/DB에서 가져와야 함 (절대 원칙)
- **Supabase 의존성**: 백엔드는 Supabase 생태계 내에서 구현
- **Edge Functions 제한**:
  - 최대 실행 시간 제한 고려
  - Cold Start 시간 최소화 필요
- **크롤링 제한**:
  - 출처 사이트의 robots.txt 준수
  - Rate Limiting 준수

### 6.2 비즈니스 제약
- **커뮤니티 프로젝트**: 1인 개발/운영
- **예산**: 무료/저렴한 서비스 우선 (Supabase Free Tier, Cloudflare Free)
- **유지보수**: 자동화 우선, 수동 작업 최소화

### 6.3 법적 제약
- **개인정보 보호**:
  - GDPR/개인정보보호법 준수
  - 개인정보 처리방침 명시
  - 쿠키 동의 (필요 시)
- **저작권**:
  - 크롤링한 뉴스는 출처 명시 + 원문 링크
  - 사용자 업로드 컨텐츠는 저작권 체크
  - 공식 밴드 사진은 출처 표시

---

## 7. 마일스톤

### Phase 1: 핵심 기능 구축 (4주)
**목표**: 인증, 밴드 DB, 커뮤니티 게시판

- **Week 1-2**: 프로젝트 세팅 및 인증 시스템
  - Next.js + Supabase 프로젝트 초기화
  - Supabase Auth 연동 (이메일, 소셜 로그인)
  - 관리자 권한 시스템 (RLS)
  - 디자인 시스템 구축 (Emotion + Radix UI)

- **Week 3**: 밴드 데이터베이스
  - 밴드/앨범/아티스트 테이블 설계
  - 밴드 정보 CRUD
  - 앨범 정보 CRUD
  - 검색 및 필터링

- **Week 4**: 커뮤니티 게시판
  - 게시글 CRUD (Drizzle ORM)
  - 마크다운 에디터
  - 댓글 시스템
  - 5개 게시판 구축

**완료 조건**:
- 회원가입/로그인 가능
- 밴드/앨범 정보 등록 및 조회 가능
- 게시판에서 글 작성/조회 가능

---

### Phase 2: 공연 일정 및 뉴스 자동화 (3주)
**목표**: 공연 일정 관리, Rock 뉴스 크롤링, 갤러리

- **Week 5**: 공연 일정 시스템
  - 캘린더 UI (react-big-calendar 또는 FullCalendar)
  - 공연 정보 CRUD
  - 티켓 링크 연동

- **Week 6**: Rock 뉴스 자동 업데이트
  - Edge Function: Rock 뉴스 크롤러
  - Cron Job 설정 (일 1회 실행)
  - 뉴스 카드 UI
  - 카테고리 필터링

- **Week 7**: 포토 갤러리
  - 사진 업로드 시스템
  - Masonry 레이아웃 갤러리
  - 밴드별/공연별 분류

**완료 조건**:
- 공연 일정 등록 및 확인 가능
- 뉴스가 자동으로 업데이트됨
- 포토 갤러리에서 사진 업로드 및 조회 가능

---

### Phase 3: AI 아트 및 YouTube (3주)
**목표**: AI Rock Art, YouTube 영상 관리, 문의 기능

- **Week 8**: AI Rock Art 게시판
  - AI 이미지 업로드 시스템
  - 갤러리 뷰 + 라이트박스
  - 작품 메타데이터 (모델, 프롬프트)

- **Week 9**: YouTube Rock 영상 관리
  - YouTube Data API 연동
  - 크롤링 Edge Function
  - 링크 카드 UI + 임베드 플레이어

- **Week 10**: 문의 기능 및 통합
  - 문의 폼 + reCAPTCHA
  - 이메일 전송 (Resend/SendGrid)
  - 전체 UX 최적화

**완료 조건**:
- AI Rock Art 업로드 및 갤러리 확인 가능
- YouTube Rock 영상 자동 수집
- 방문자가 문의 전송 가능

---

### Phase 4: 관리자 도구 및 최적화 (2주)
**목표**: 관리자 대시보드, 모니터링, 성능 최적화

- **Week 11**: 관리자 대시보드
  - 통계 대시보드 (방문자, 게시물, 밴드 DB)
  - 콘텐츠 관리 패널
  - 사용자 관리

- **Week 12**: 모니터링 및 최적화
  - Loki + Grafana 연동
  - 성능 최적화 (이미지, 코드 스플리팅)
  - SEO 최적화 (사이트맵, 메타 태그)

**완료 조건**:
- 관리자 대시보드에서 전체 통계 확인 가능
- Grafana에서 로그 확인 가능
- Lighthouse 점수 90점 이상

---

### Phase 5: 런칭 및 안정화 (1주)
**목표**: 도메인 연결, 최종 테스트, 런칭

- **Week 13**: 런칭 준비
  - 도메인 연결 (metaldragon.co.kr)
  - Cloudflare 설정 (SSL, 캐싱)
  - 전체 기능 테스트
  - 개인정보 처리방침, 이용약관 작성
  - 공식 런칭

**완료 조건**:
- metaldragon.co.kr 접속 가능
- 모든 핵심 기능 정상 작동
- 모니터링 시스템 가동

---

## 8. 우선순위 정리

### Must Have (P0)
- 인증 시스템
- 밴드 데이터베이스 (밴드, 앨범, 아티스트)
- 커뮤니티 게시판 (5개)

### Should Have (P1)
- 공연 일정 관리
- Rock 뉴스 자동 업데이트
- 포토 갤러리
- AI Rock Art 게시판

### Nice to Have (P2)
- YouTube Rock 영상 관리
- 문의 기능
- 관리자 대시보드
- 고급 통계 및 차트

---

## 9. 리스크 관리

### 9.1 기술 리스크
| 리스크 | 영향도 | 완화 방안 |
|--------|--------|-----------|
| Supabase Free Tier 제한 초과 | 높음 | 사용량 모니터링, 필요 시 유료 전환 |
| 크롤링 차단/제한 | 중간 | User-Agent 설정, Rate Limiting, 공식 API 우선 사용 |
| Edge Functions Cold Start | 낮음 | Warming 로직, 캐싱 전략 |
| 저작권 문제 | 중간 | 출처 명시, 사용자 업로드 검토 시스템 |

### 9.2 일정 리스크
| 리스크 | 영향도 | 완화 방안 |
|--------|--------|-----------|
| 1인 개발 지연 | 높음 | 우선순위에 따라 Phase 조정, MVP 먼저 완성 |
| 기술 학습 곡선 | 중간 | 공식 문서, 예제 프로젝트 참고 |
| 스코프 크리프 | 중간 | PRD 엄격 준수, 추가 기능은 Phase 5 이후 |

---

## 10. 용어집

- **RLS (Row Level Security)**: Supabase Postgres의 행 단위 보안 정책
- **Edge Functions**: Supabase의 서버리스 함수 (Deno 런타임)
- **RSC (React Server Components)**: Next.js의 서버 컴포넌트
- **Drizzle ORM**: TypeScript 기반 SQL ORM
- **Emotion**: CSS-in-JS 라이브러리
- **Radix UI**: 접근성 우선 React 컴포넌트 라이브러리
- **Upstash Redis**: 서버리스 Redis 서비스
- **Loki**: 로그 수집 시스템
- **Grafana**: 데이터 시각화 및 모니터링 도구

---

**문서 버전**: 2.0 (Rock Community Edition)
**작성일**: 2025-10-23
**다음 리뷰 예정일**: Phase 1 완료 시
